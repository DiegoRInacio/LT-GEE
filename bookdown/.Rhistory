tInfo = as.character(select(df, tasmax)$tasmax)
tInfo = gsub('tmin=', '"tmin":', tInfo)
tInfo = gsub('tmean=', '"tmean":', tInfo)
tInfo = gsub('tmax=', '"tmax":', tInfo)
tInfo = fromJSON(tInfo)
df = data.frame(matrix(unlist(tInfo), nrow=80, byrow=T))
colnames(df) = c('tmin', 'tmean', 'tmax')
df = data.frame(df, date=tDate)
head(df)
df
dfOrig = read_csv(fn)
tDate = as.character(select(dfOrig, date)$date)
tInfo = as.character(select(df, tasmax)$tasmax)
tInfo = gsub('tmin=', '"tmin":', tInfo)
tInfo = gsub('tmean=', '"tmean":', tInfo)
tInfo = gsub('tmax=', '"tmax":', tInfo)
tInfo = fromJSON(tInfo)
df = data.frame(matrix(unlist(tInfo), nrow=80, byrow=T))
dfOrig = read_csv(fn)
tDate = as.character(select(dfOrig, date)$date)
tInfo = as.character(select(df, tasmax)$tasmax)
fn = "C:\\Users\\braatenj\\Downloads\\tasmax (1).csv"
dfOrig = read_csv(fn)
tDate = as.character(select(dfOrig, date)$date)
tInfo = as.character(select(dfOrig, tasmax)$tasmax)
tInfo = gsub('tmin=', '"tmin":', tInfo)
tInfo = gsub('tmean=', '"tmean":', tInfo)
tInfo = gsub('tmax=', '"tmax":', tInfo)
tInfo = fromJSON(tInfo)
df = data.frame(matrix(unlist(tInfo), nrow=80, byrow=T))
colnames(df) = c('tmin', 'tmean', 'tmax')
df = data.frame(df, date=tDate)
head(df)
fn = "C:\\Users\\braatenj\\Downloads\\tasmax (1).csv"
dfOrig = read_csv(fn)
tDate = as.character(select(dfOrig, date)$date)
tInfo = as.character(select(dfOrig, tasmax)$tasmax)
tInfo = gsub('tmin=', '"tmin":', tInfo)
tInfo = gsub('tmean=', '"tmean":', tInfo)
tInfo = gsub('tmax=', '"tmax":', tInfo)
tInfo = fromJSON(tInfo)
tInfo
df = data.frame(matrix(unlist(tInfo), nrow=80, byrow=T))
df
colnames(df) = c('tmin', 'tmean', 'tmax')
head(df)
?cbind
tDate
tDate = strsplit(',')
dfOrig = read_csv(fn)
tDate = as.character(select(dfOrig, date)$date)
tDate = strsplit(tDate, ',')
tDate
dfOrig = read_csv(fn)
tDate = as.character(select(dfOrig, date)$date)
tdate = strsplit(tDate, ',')
tInfo = as.character(select(dfOrig, tasmax)$tasmax)
tInfo = gsub('tmin=', '"tmin":', tInfo)
tInfo = gsub('tmean=', '"tmean":', tInfo)
tInfo = gsub('tmax=', '"tmax":', tInfo)
tInfo = fromJSON(tInfo)
df = data.frame(matrix(unlist(tInfo), nrow=80, byrow=T))
colnames(df) = c('tmin', 'tmean', 'tmax')
df = cbind(df, tdate)
head(df)
dfOrig = read_csv(fn)
tDate = as.character(select(dfOrig, date)$date)
tdate = strsplit(tDate, ',')
tInfo = as.character(select(dfOrig, tasmax)$tasmax)
tInfo = gsub('tmin=', '"tmin":', tInfo)
tInfo = gsub('tmean=', '"tmean":', tInfo)
tInfo = gsub('tmax=', '"tmax":', tInfo)
tInfo = fromJSON(tInfo)
df = data.frame(matrix(unlist(tInfo), nrow=80, byrow=T))
colnames(df) = c('tmin', 'tmean', 'tmax')
df = cbind(df, data.frame('tdate'=tdate)
head(df)
dfOrig = read_csv(fn)
tDate = as.character(select(dfOrig, date)$date)
tdate = strsplit(tDate, ',')
tInfo = as.character(select(dfOrig, tasmax)$tasmax)
tInfo = gsub('tmin=', '"tmin":', tInfo)
tInfo = gsub('tmean=', '"tmean":', tInfo)
tInfo = gsub('tmax=', '"tmax":', tInfo)
tInfo = fromJSON(tInfo)
df = data.frame(matrix(unlist(tInfo), nrow=80, byrow=T))
colnames(df) = c('tmin', 'tmean', 'tmax')
df = data.frame(df, data.frame('tdate'=tdate)
head(df)
dfOrig = read_csv(fn)
tDate = as.character(select(dfOrig, date)$date)
tdate = strsplit(tDate, ',')
tInfo = as.character(select(dfOrig, tasmax)$tasmax)
tInfo = gsub('tmin=', '"tmin":', tInfo)
tInfo = gsub('tmean=', '"tmean":', tInfo)
tInfo = gsub('tmax=', '"tmax":', tInfo)
tInfo = fromJSON(tInfo)
df = data.frame(matrix(unlist(tInfo), nrow=80, byrow=T))
colnames(df) = c('tmin', 'tmean', 'tmax')
df = data.frame(df, data.frame('tdate'=tdate))
head(df)
tdate
dfOrig = read_csv(fn)
tDate = as.character(select(dfOrig, date)$date)
tdate = strsplit(tDate, ', ')
tInfo = as.character(select(dfOrig, tasmax)$tasmax)
tInfo = gsub('tmin=', '"tmin":', tInfo)
tInfo = gsub('tmean=', '"tmean":', tInfo)
tInfo = gsub('tmax=', '"tmax":', tInfo)
tInfo = fromJSON(tInfo)
df = data.frame(matrix(unlist(tInfo), nrow=80, byrow=T))
colnames(df) = c('tmin', 'tmean', 'tmax')
df = data.frame(df, data.frame('tdate'=tdate))
head(df)
tdate
dfOrig = read_csv(fn)
tDate = as.character(select(dfOrig, date)$date)
tdate = strsplit(tDate, ', ')
tdate = gsub(tdate, '[','')
tdate = gsub(tdate, ']','')
dfOrig = read_csv(fn)
tDate = as.character(select(dfOrig, date)$date)
tdate = strsplit(tDate, ', ')
tdate = gsub('[', '', tdate)
tdate = gsub(']', '', tdate)
dfOrig = read_csv(fn)
tDate = as.character(select(dfOrig, date)$date)
tdate = strsplit(tDate, ', ')
tdate = gsub('\[', '', tdate)
tdate = gsub('\]', '', tdate)
dfOrig = read_csv(fn)
tDate = as.character(select(dfOrig, date)$date)
tdate = strsplit(tDate, ', ')
tdate = gsub('\\[', '', tdate)
tdate = gsub('\\]', '', tdate)
tdate
tdate[5]
dfOrig = read_csv(fn)
tDate = as.character(select(dfOrig, date)$date)
tdate = gsub('\\[', '', tdate)
tdate = gsub('\\]', '', tdate)
tdate = strsplit(tDate, ', ')
tdate
dfOrig = read_csv(fn)
tDate = as.character(select(dfOrig, date)$date)
tdate = gsub('\[', '', tdate)
tdate = gsub('\]', '', tdate)
tdate = strsplit(tDate, ', ')
dfOrig = read_csv(fn)
tDate = as.character(select(dfOrig, date)$date)
tdate = gsub('[', '', tdate)
tdate = gsub(']', '', tdate)
tdate = strsplit(tDate, ', ')
tdate
dfOrig = read_csv(fn)
tdate = as.character(select(dfOrig, date)$date)
tdate = gsub('[', '', tdate)
tdate = gsub(']', '', tdate)
tdate = strsplit(tDate, ', ')
dfOrig = read_csv(fn)
tdate = as.character(select(dfOrig, date)$date)
tdate = gsub('\\[', '', tdate)
tdate = gsub('\\]', '', tdate)
tdate
tdate = strsplit(tDate, ', ')
tdate
dfOrig = read_csv(fn)
tdate = as.character(select(dfOrig, date)$date)
tdate = gsub('\\[', '', tdate)
tdate = gsub('\\]', '', tdate)
tdate = strsplit(tdate, ', ')
tdate
dfOrig = read_csv(fn)
tdate = as.character(select(dfOrig, date)$date)
tdate = gsub('\\[', '', tdate)
tdate = gsub('\\]', '', tdate)
tdate = strsplit(tdate, ', ')
tInfo = as.character(select(dfOrig, tasmax)$tasmax)
tInfo = gsub('tmin=', '"tmin":', tInfo)
tInfo = gsub('tmean=', '"tmean":', tInfo)
tInfo = gsub('tmax=', '"tmax":', tInfo)
tInfo = fromJSON(tInfo)
df = data.frame(matrix(unlist(tInfo), nrow=80, byrow=T))
colnames(df) = c('tmin', 'tmean', 'tmax')
df = data.frame(df, data.frame('tdate'=tdate))
head(df)
data.frame('tdate'=tdate)
dfOrig = read_csv(fn)
tdate = as.character(select(dfOrig, date)$date)
tdate = gsub('\\[', '', tdate)
tdate = gsub('\\]', '', tdate)
tdate = strsplit(tdate, ', ')
tInfo = as.character(select(dfOrig, tasmax)$tasmax)
tInfo = gsub('tmin=', '"tmin":', tInfo)
tInfo = gsub('tmean=', '"tmean":', tInfo)
tInfo = gsub('tmax=', '"tmax":', tInfo)
tInfo = fromJSON(tInfo)
df = data.frame(matrix(unlist(tInfo), nrow=80, byrow=T))
df = data.frame(df, data.frame('tdate'=tdate))
colnames(df) = c('tmin', 'tmean', 'tmax', 'tdate')
df
p = ggplot(df, aes('tdate','tmean')) +
geom_line()
p
str(df)
fn = "C:\\Users\\braatenj\\Downloads\\tasmax (1).csv"
dfOrig = read_csv(fn)
tdate = as.character(select(dfOrig, date)$date)
tdate = gsub('\\[', '', tdate)
tdate = gsub('\\]', '', tdate)
tdate = strsplit(tdate, ', ')
tInfo = as.character(select(dfOrig, tasmax)$tasmax)
tInfo = gsub('tmin=', '"tmin":', tInfo)
tInfo = gsub('tmean=', '"tmean":', tInfo)
tInfo = gsub('tmax=', '"tmax":', tInfo)
tInfo = fromJSON(tInfo)
df = data.frame(matrix(unlist(tInfo), nrow=80, byrow=T))
df = data.frame(df, data.frame('tdate'=as.Date(tdate)))
colnames(df) = c('tmin', 'tmean', 'tmax', 'tdate')
head(df)
p = ggplot(df, aes('tdate','tmean')) +
geom_line()
p
head(df)
fn = "C:\\Users\\braatenj\\Downloads\\tasmax (1).csv"
dfOrig = read_csv(fn)
tdate = as.character(select(dfOrig, date)$date)
tdate = gsub('\\[', '', tdate)
tdate = gsub('\\]', '', tdate)
tdate = strsplit(tdate, ', ')
tInfo = as.character(select(dfOrig, tasmax)$tasmax)
tInfo = gsub('tmin=', '"tmin":', tInfo)
tInfo = gsub('tmean=', '"tmean":', tInfo)
tInfo = gsub('tmax=', '"tmax":', tInfo)
tInfo = fromJSON(tInfo)
df = data.frame(matrix(unlist(tInfo), nrow=80, byrow=T))
df = data.frame(df, data.frame('tdate'=as.Date(tdate)))
tdate
dfOrig = read_csv(fn)
tdate = as.character(select(dfOrig, date)$date)
tdate = gsub('\\[', '', tdate)
tdate = gsub('\\]', '', tdate)
tdate = gsub('T00:00:00', '', tdate)
tdate = strsplit(tdate, ', ')
tInfo = as.character(select(dfOrig, tasmax)$tasmax)
tInfo = gsub('tmin=', '"tmin":', tInfo)
tInfo = gsub('tmean=', '"tmean":', tInfo)
tInfo = gsub('tmax=', '"tmax":', tInfo)
tInfo = fromJSON(tInfo)
df = data.frame(matrix(unlist(tInfo), nrow=80, byrow=T))
df = data.frame(df, data.frame('tdate'=as.Date(tdate)))
colnames(df) = c('tmin', 'tmean', 'tmax', 'tdate')
head(df)
as.Date(tdate)
as.Date(as.character(tdate))
as.character(tdate)
dfOrig = read_csv(fn)
tdate = as.character(select(dfOrig, date)$date)
tdate = gsub('\\[', '', tdate)
tdate = gsub('\\]', '', tdate)
tdate = gsub('T00:00:00', '', tdate)
tdate = strsplit(tdate, ', ')
tdate
betterDates <- as.Date(tdate, format = "%Y-%M-%D")
betterDates <- as.Date(tdate, format = "%Y-%m-%d")
tdate
dfOrig = read_csv(fn)
tdate = as.character(select(dfOrig, date)$date)
tdate = gsub('\\[', '', tdate)
tdate = gsub('\\]', '', tdate)
tdate = gsub('T00:00:00', '', tdate)
tdate = unlist(strsplit(tdate, ', '))
tdate
dfOrig = read_csv(fn)
tdate = as.character(select(dfOrig, date)$date)
tdate = gsub('\\[', '', tdate)
tdate = gsub('\\]', '', tdate)
tdate = gsub('T00:00:00', '', tdate)
tdate = as.Date(unlist(strsplit(tdate, ', ')))
tdate
dfOrig = read_csv(fn)
tdate = as.character(select(dfOrig, date)$date)
tdate = gsub('\\[', '', tdate)
tdate = gsub('\\]', '', tdate)
tdate = gsub('T00:00:00', '', tdate)
tdate = as.Date(unlist(strsplit(tdate, ', ')))
tInfo = as.character(select(dfOrig, tasmax)$tasmax)
tInfo = gsub('tmin=', '"tmin":', tInfo)
tInfo = gsub('tmean=', '"tmean":', tInfo)
tInfo = gsub('tmax=', '"tmax":', tInfo)
tInfo = fromJSON(tInfo)
df = data.frame(matrix(unlist(tInfo), nrow=80, byrow=T))
df = data.frame(df, data.frame('tdate'=tdate))
colnames(df) = c('tmin', 'tmean', 'tmax', 'tdate')
head(df)
p = ggplot(df, aes('tdate','tmean')) +
geom_line()
p
str(df)
p = ggplot(df, aes('tdate','tmean')) +
geom_point() +
scale_x_date(labels = date_format("%m-%Y"))
p
p = ggplot(df, aes('tdate','tmean')) +
geom_point() +
scale_x_date(format = "%m-%Y")
p
p = ggplot(df, aes('tdate','tmean')) +
geom_point() +
scale_x_date("%m-%Y")
p
df
str(df)
p = ggplot(df, aes('tdate','tmean')) +
geom_line() +
scale_x_date("%m-%Y")
p
p = ggplot(df, aes('tdate','tmean')) +
geom_line() +
p
fn = "C:\\Users\\braatenj\\Downloads\\tasmax (1).csv"
dfOrig = read_csv(fn)
tdate = as.character(select(dfOrig, date)$date)
tdate = gsub('\\[', '', tdate)
tdate = gsub('\\]', '', tdate)
tdate = gsub('T00:00:00', '', tdate)
tdate = as.Date(unlist(strsplit(tdate, ', ')))
tInfo = as.character(select(dfOrig, tasmax)$tasmax)
tInfo = gsub('tmin=', '"tmin":', tInfo)
tInfo = gsub('tmean=', '"tmean":', tInfo)
tInfo = gsub('tmax=', '"tmax":', tInfo)
tInfo = fromJSON(tInfo)
df = data.frame(matrix(unlist(tInfo), nrow=80, byrow=T))
df = data.frame(df, data.frame('tdate'=tdate))
colnames(df) = c('tmin', 'tmean', 'tmax', 'tdate')
head(df)
str(df)
p = ggplot(df, aes('tdate','tmean')) +
geom_line() +
p
df
p = ggplot(df, aes('tmin','tmean')) +
geom_line()
p
p = ggplot2(df, aes('tmin','tmean')) +
geom_line()
p
p = ggplot(df, aes('tmin','tmean')) +
geom_line()
p
tmin
df
str(df)
plot(df$tmin, df$tmean)
plot(df$tdate, df$tmean)
library(ggplot2)
p = ggplot(df, aes(tdate,tmean)) +
geom_line()
p
?geom_ribbon
p = ggplot(df, aes(tdate, tmean)) +
geom_line() +
geom_ribbon(df, aes(ymin=tmin, ymax=tmax))
p
p = ggplot(df, aes(tdate, tmean)) +
geom_line() +
geom_ribbon(aes(ymin=tmin, ymax=tmax))
p
p = ggplot(df, aes(tdate, tmean)) +
geom_ribbon(aes(ymin=tmin, ymax=tmax))
geom_line() +
p
p = ggplot(df, aes(tdate, tmean)) +
geom_ribbon(aes(ymin=tmin, ymax=tmax)) +
geom_line()
p
p = ggplot(df, aes(tdate, tmean)) +
geom_ribbon(aes(ymin=tmin, ymax=tmax)) +
geom_line() +
theme_bw()
p
p = ggplot(df, aes(tdate, tmean)) +
geom_ribbon(aes(ymin=tmin, ymax=tmax, fill='red')) +
geom_line() +
theme_bw()
p
p = ggplot(df, aes(tdate, tmean)) +
geom_ribbon(aes(ymin=tmin, ymax=tmax, fill='grey')) +
geom_line() +
theme_bw()
p
p = ggplot(df, aes(tdate, tmean)) +
geom_ribbon(aes(ymin=tmin, ymax=tmax, fill='gray')) +
geom_line() +
theme_bw()
p
p = ggplot(df, aes(tdate, tmean)) +
geom_ribbon(aes(ymin=tmin, ymax=tmax, fill='red')) +
geom_line() +
theme_bw()
p
p = ggplot(df, aes(tdate, tmean)) +
geom_ribbon(aes(ymin=tmin, ymax=tmax, fill='grey70')) +
geom_line() +
theme_bw()
p
ggplot(df, aes(tdate, tmean)) +
geom_ribbon(aes(ymin=tmin, ymax=tmax, fill='grey70')) +
geom_line() +
theme_bw()
ggplot(df, aes(tdate, tmean)) +
geom_ribbon(aes(ymin=tmin, ymax=tmax, fill='grey70')) +
geom_line()# +
#theme_bw()
ggplot(df, aes(tdate, tmean)) +
geom_ribbon(aes(ymin=tmin, ymax=tmax) +
geom_line()# +
#theme_bw()
ggplot(df, aes(tdate, tmean)) +
geom_ribbon(aes(ymin=tmin, ymax=tmax)) +
geom_line()# +
#theme_bw()
ggplot(df, aes(tdate, tmean)) +
geom_ribbon(aes(ymin=tmin, ymax=tmax), fill='grey70')) +
geom_line()# +
ggplot(df, aes(tdate, tmean)) +
geom_ribbon(aes(ymin=tmin, ymax=tmax), fill='grey70') +
geom_line()# +
#theme_bw()
ggplot(df, aes(tdate, tmean)) +
geom_ribbon(aes(ymin=tmin, ymax=tmax), fill='grey70', alpha=0.5) +
geom_line()# +
#theme_bw()
ggplot(df, aes(tdate, tmean)) +
geom_ribbon(aes(ymin=tmin, ymax=tmax), fill='grey40', alpha=0.5) +
geom_line()# +
#theme_bw()
ggplot(df, aes(tdate, tmean)) +
geom_ribbon(aes(ymin=tmin, ymax=tmax), fill='grey40', alpha=0.5) +
geom_line() +
theme_bw()
library(tidyverse)
library(jsonlite)
fn = "D:/work/proj/john_kim_climate/siuslaw_climate/data/climate/dcp/tasmax.csv"
dfOrig = read_csv(fn)
# get the date
tdate = as.character(select(dfOrig, date)$date)
tdate = gsub('\\[', '', tdate)
tdate = gsub('\\]', '', tdate)
tdate = gsub('T00:00:00', '', tdate)
tdate = as.Date(unlist(strsplit(tdate, ', ')))
# get the temp data
tInfo = as.character(select(dfOrig, tasmax)$tasmax)
tInfo = gsub('tmin=', '"tmin":', tInfo)
tInfo = gsub('tmean=', '"tmean":', tInfo)
tInfo = gsub('tmax=', '"tmax":', tInfo)
tInfo = fromJSON(tInfo)
# build a dataframe
df = data.frame(matrix(unlist(tInfo), nrow=80, byrow=T))
df = data.frame(df, data.frame('tdate'=tdate))
colnames(df) = c('tmin', 'tmean', 'tmax', 'tdate')
# plot the data
ggplot(df, aes(tdate, tmean)) +
geom_ribbon(aes(ymin=tmin, ymax=tmax), fill='grey40', alpha=0.5) +
geom_line() +
theme_bw()
ggplot(df, aes(tdate, tmean)) +
geom_ribbon(aes(ymin=tmin, ymax=tmax), fill='grey40', alpha=0.5) +
geom_line() +
xlab('Year') +
ylab('Temperature (\u00B0C)') +
theme_bw()
bookdown::render_book("index.Rmd", "bookdown::gitbook")
setwd("D:/work/code_library/LT-GEE/bookdown")
bookdown::render_book("index.Rmd", "bookdown::gitbook")
files = list.files('../docs', '.html', full.names = T)
trackingLines = c(
'<!-- Global site tag (gtag.js) - Google Analytics -->',
'<script async src="https://www.googletagmanager.com/gtag/js?id=UA-120674089-1"></script>',
'<script>',
'window.dataLayer = window.dataLayer || [];',
'function gtag(){dataLayer.push(arguments);}',
'gtag(\'js\', new Date());',
'gtag(\'config\', \'UA-120674089-1\');',
'</script>'
)
for(thisFile in files){
lines = readLines(thisFile)
part1 = lines[1:43]
part2 = lines[44:length(lines)]
newLines = c(part1, trackingLines, part2)
writeLines(newLines, thisFile)
}
bookdown::render_book("index.Rmd", "bookdown::gitbook")
files = list.files('../docs', '.html', full.names = T)
trackingLines = c(
'<!-- Global site tag (gtag.js) - Google Analytics -->',
'<script async src="https://www.googletagmanager.com/gtag/js?id=UA-120674089-1"></script>',
'<script>',
'window.dataLayer = window.dataLayer || [];',
'function gtag(){dataLayer.push(arguments);}',
'gtag(\'js\', new Date());',
'gtag(\'config\', \'UA-120674089-1\');',
'</script>'
)
for(thisFile in files){
lines = readLines(thisFile)
part1 = lines[1:43]
part2 = lines[44:length(lines)]
newLines = c(part1, trackingLines, part2)
writeLines(newLines, thisFile)
}
